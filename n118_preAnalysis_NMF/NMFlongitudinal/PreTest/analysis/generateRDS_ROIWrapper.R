###################################################################################################
##########################         GRMPY - Generate Structual RDS        ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/16/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #

# This script version was create in order to perform analysis using repeated measures the GRMPY subjects
# while also including their data from the first time point, which was the PNC Study. 

###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################

#########################################################################
##### Reads in all the Demographic, Irritability, and structQA Data #####
#########################################################################

oldRDS<- readRDS("/data/joy/BBL/projects/jirsaraieStructuralIrrit/data/JLFrepeat/n236_Demo+ARI+QA_20171117.rds")

Subjects <- read.csv("/data/joy/BBL/projects/jirsaraieStructuralIrrit/data/NMFlongitudinal/n229_Cohort_20171124.csv",header=FALSE)

############################################################
##### Refines Data to Get only those in the NMF Cohort #####
############################################################

newRDS <- oldRDS[(oldRDS$scanid %in% Subjects$V2 ),]

#####################################
##### Write the Output RDS File #####
#####################################

saveRDS(newRDS, "/data/joy/BBL/projects/jirsaraieStructuralIrrit/data/NMFlongitudinal/n229_Demo+ARI+QA_20171125.rds")

###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
